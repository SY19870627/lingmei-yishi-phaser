# 資料結構整理

下列表格依 `src/core/Types.ts` 定義彙整主要 JSON 結構。

## SacredItem
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | 唯一識別碼。 |
| `名` | `string` | 顯示名稱。 |
| `來源` | `string` | 來源描述。 |
| `用途` | `("安撫"\|"請託"\|"作證"\|"喚醒")[]` | 可能用途標籤。 |
| `鉤子` | `string?` | 觸發或提示描述。 |

## WordCard
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | 唯一識別碼。 |
| `字` | `string` | 字卡內容。 |
| `標籤` | `("安撫"\|"提問"\|"交換"\|"儀式"\|"指認")[]` | 字卡適用分類。 |
| `備註` | `string?` | 額外說明文字。 |

## Obsession
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | 執念識別碼。 |
| `名` | `string` | 執念名稱。 |
| `條件` | `string[]` | 解除條件列表。 |
| `狀態` | `"未解"\|"鬆動"\|"已解"` | 目前進度。 |

## Spirit
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | 靈體識別碼。 |
| `名` | `string` | 靈體姓名。 |
| `年代` | `string` | 所屬年代。 |
| `場域_anchor` | `string` | 主要駐留錨點。 |
| `初始狀態` | `"現身"\|"失我"` | 登場狀態。 |
| `煞氣` | `Miasma` (`"清"\|"濁"\|"沸"`) | 靈體周遭煞氣。 |
| `背景` | `string` | 背景敘述。 |
| `執念` | `Obsession[]` | 內含執念列表。 |
| `特例` | `{ 類型:"失我靈"\|"拒談靈"; 關鍵物?:string; 關鍵人物?:string; 拒談觸發?:string; }?` | 特殊行為設定。 |
| `限制` | `{ 唯一性鍵:string[]; }?` | 限制條件。 |

## Anchor
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | 錨點識別碼。 |
| `地點` | `string` | 地點名稱。 |
| `條件` | `string[]` | 解鎖條件。 |
| `服務靈` | `string` | 對應靈體。 |
| `完成後` | `{ 裝飾?:string; 回聲腳本?:string; }?` | 完成後效果。 |

## NPC
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | NPC 識別碼。 |
| `稱呼` | `string` | 稱呼或職稱。 |
| `性格` | `string[]` | 個性特徵。 |
| `避雷` | `string[]` | 需避免話題。 |
| `轉折階段` | `("抗拒"\|"猶豫"\|"願試"\|"承諾")[]` | 調解進程。 |
| `可被說動的點` | `string[]` | 說服重點。 |
| `到場條件` | `string[]` | 會出現的條件。 |

## StoryNode
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `id` | `string` | 劇情節點 ID。 |
| `anchor` | `string` | 對應錨點。 |
| `steps` | `StoryStep[]` | 劇情步驟。支援 `TEXT`、`GIVE_ITEM`、`UPDATE_FLAG`、`END`、`CALL_GHOST_COMM`、`CALL_MEDIATION`。 |

## GhostOption
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `text` | `string` | 選項台詞。 |
| `type` | `"安撫"\|"提問"\|"交換"\|"儀式"\|"指認"` | 選項類型。 |
| `targets` | `string[]` | 指向的執念或角色。 |
| `requires` | `string[]` | 需求道具或旗標。 |
| `effect` | `"解結"\|"鬆動"\|"平煞"\|"條件交換"\|"觸怒"` | 主要效果。 |
| `hint` | `string?` | 額外提示。 |

## WorldStateData
| 欄位 | 型別 | 說明 |
| --- | --- | --- |
| `位置` | `string` | 玩家所在錨點名稱。 |
| `煞氣` | `Miasma` | 當前煞氣層級。 |
| `陰德` | `"低"\|"中"\|"高"` | 陰德狀態。 |
| `同行` | `string[]` | 與玩家同行的人員。 |
| `物品` | `string[]` | 持有物品 ID。 |
| `字卡` | `string[]` | 可用字卡 ID。 |
| `旗標` | `Record<string, any>` | 劇情旗標。 |
| `已安息靈` | `string[]` | 已送行的靈體。 |
| `對話摘要` | `string[]` | 簡短紀錄。 |
| `版本` | `number` | 存檔版本。 |
